{% extends 'base.html' %}
{% load static %}
{% block cssfile %}
	<link rel="stylesheet" href="{% static 'userapp/style.css' %}" >
{% endblock cssfile %}
{% block content %}
<div class="container">
	<div class="regform">
		<div class="card bg-light">
			<div class="card-header">User Registration form</div>
		<div class="card-body">
			<h5 class="card-title text-center">Register Now</h5>
			{% if messages %}
				{% for message in messages %}
					<div class="alert {% if message.tags %}alert-danger{% endif %}" role="alert">{{ message }}</div>
				{% endfor %}
			{% endif %}
				<form class="border border-light formpad" action="{% url 'register_user' %}" method="POST" id="register">
					{%csrf_token%}
					{% for fields in user %}
						<div class="form-group">
							<label for="name">{{fields.label_tag}}</label>
							<br>
							{{fields}}
						</div>
					{% endfor %}
					{% for fields in userext %}
						<div class="form-group">
							<label for="name">{{fields.label_tag}}</label>
							<br>
							{{fields}}
						</div>
					{% endfor %}
					<button id="regist" class="float-right btn btn-outline-primary" type="submit">Register</button>
				</form>
				<div class="sign-up">
					Already have an account? <a href="{% url 'login' %}">Log In</a>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
     window.onload = function() {
		document.getElementById('id_first_name').className = "form-control";
		document.getElementById('id_username').className = "form-control";
		document.getElementById('id_email').className = "form-control";
		document.getElementById('id_password1').className = "form-control";
		document.getElementById('id_password2').className = "form-control";
		document.getElementById('id_usertype').className = "form-control";
		document.getElementById('id_address').className = "form-control";
		var field = document.getElementById("id_password1");
		field.setAttribute("name", "password")
	  };
	  /*
    $("#register").submit(function (e) {
        // preventing from page reload and default actions
        e.preventDefault();
        // serialize the data for sending the form data.
        //var serializedData = $(this).serialize();
		var data={
			"first_name":document.getElementById('id_first_name').value,
			"username":document.getElementById('id_username').value,
			"email":document.getElementById('id_email').value,
			"password":document.getElementById('id_password1').value,
			"usertype":document.getElementById('id_usertype').value,
			"address":document.getElementById('id_address').value
		}
		console.log(data)
        // make POST ajax call
        $.ajax({
            type: 'POST',
            url: "{% url 'register_user' %}",
            data: data,
            success: function (response) {
                // on successfull creating object
                // 1. clear the form.
                $("#register").trigger('reset');
                // 2. focus to nickname input 
                $("#id_first_name").focus();
				
				console.log(response)
            },
            error: function (response) {
                // alert the error if any error occured
                alert(response);
				console.log(response)
            }
        })
    })*/
</script>
{% endblock content%}